function O(i){return encodeURIComponent(String(i).trim().toLowerCase().replace(/\s+/g,"-"))}function o(i){return String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(i,u){var v;u=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\]|\\$\\<toc(\\{[^}]*\\})\\>)",slugify:O,uniqueSlugStartIndex:1,containerClass:"table-of-contents",containerId:void 0,listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0,callback:void 0},u);var C=new RegExp("^"+u.placeholder+"$","i");i.renderer.rules.tocOpen=function(n,r){var e=Object.assign({},u);return n&&r>=0&&(e=Object.assign(e,n[r].inlineOptions)),"<nav"+(e.containerId?' id="'+o(e.containerId)+'"':"")+' class="'+o(e.containerClass)+'">'},i.renderer.rules.tocClose=function(){return"</nav>"},i.renderer.rules.tocBody=function(n,r){var e=Object.assign({},u);n&&r>=0&&(e=Object.assign(e,n[r].inlineOptions));var l,t={},p=Array.isArray(e.level)?(l=e.level,function(a){return l.includes(a)}):function(a){return function(s){return s>=a}}(e.level);return function a(s){var c=e.listClass?' class="'+o(e.listClass)+'"':"",f=e.itemClass?' class="'+o(e.itemClass)+'"':"",y=e.linkClass?' class="'+o(e.linkClass)+'"':"";if(s.c.length===0)return"";var d="";return(s.l===0||p(s.l))&&(d+="<"+(o(e.listType)+c)+">"),s.c.forEach(function(g){p(g.l)?d+="<li"+f+"><a"+y+' href="#'+function(k){for(var h=k,m=e.uniqueSlugStartIndex;Object.prototype.hasOwnProperty.call(t,h);)h=k+"-"+m++;return t[h]=!0,h}(u.slugify(g.n))+'">'+(typeof e.format=="function"?e.format(g.n,o):o(g.n))+"</a>"+a(g)+"</li>":d+=a(g)}),(s.l===0||p(s.l))&&(d+="</"+o(e.listType)+">"),d}(v)},i.core.ruler.push("generateTocAst",function(n){v=function(r){for(var e={l:0,n:"",c:[]},l=[e],t=0,p=r.length;t<p;t++){var a=r[t];if(a.type==="heading_open"){var s=r[t+1].children.filter(function(f){return f.type==="text"||f.type==="code_inline"}).reduce(function(f,y){return f+y.content},""),c={l:parseInt(a.tag.substr(1),10),n:s,c:[]};if(c.l>l[0].l)l[0].c.push(c),l.unshift(c);else if(c.l===l[0].l)l[1].c.push(c),l[0]=c;else{for(;c.l<=l[0].l;)l.shift();l[0].c.push(c),l.unshift(c)}}}return e}(n.tokens),typeof u.callback=="function"&&u.callback(i.renderer.rules.tocOpen()+i.renderer.rules.tocBody()+i.renderer.rules.tocClose(),v)}),i.block.ruler.before("heading","toc",function(n,r,e,l){var t,p=n.src.slice(n.bMarks[r]+n.tShift[r],n.eMarks[r]).split(" ")[0];if(!C.test(p))return!1;if(l)return!0;var a=C.exec(p),s={};if(a!==null&&a.length===3)try{s=JSON.parse(a[2])}catch{}return n.line=r+1,(t=n.push("tocOpen","nav",1)).markup="",t.map=[r,n.line],t.inlineOptions=s,(t=n.push("tocBody","",0)).markup="",t.map=[r,n.line],t.inlineOptions=s,t.children=[],(t=n.push("tocClose","nav",-1)).markup="",!0},{alt:["paragraph","reference","blockquote"]})}export{b as default};
//# sourceMappingURL=markdown-it-toc-done-right.bundle.js.map