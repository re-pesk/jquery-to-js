var ee=Object.create,I=Object.defineProperty,te=Object.getOwnPropertyDescriptor,ne=Object.getOwnPropertyNames,re=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty,p=(r,e)=>I(r,"name",{value:e,configurable:!0}),se=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),oe=(r,e,l,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of ne(e))!ie.call(r,c)&&c!==l&&I(r,c,{get:()=>e[c],enumerable:!(s=te(e,c))||s.enumerable});return r},U=(r,e,l)=>(l=r!=null?ee(re(r)):{},oe(e||!r||!r.__esModule?I(l,"default",{value:r,enumerable:!0}):l,r)),B=se((r,e)=>{"use strict";var l=typeof Reflect=="object"?Reflect:null,s=l&&typeof l.apply=="function"?l.apply:p(function(t,n,i){return Function.prototype.apply.call(t,n,i)},"ReflectApply"),c;l&&typeof l.ownKeys=="function"?c=l.ownKeys:Object.getOwnPropertySymbols?c=p(function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))},"ReflectOwnKeys"):c=p(function(t){return Object.getOwnPropertyNames(t)},"ReflectOwnKeys");function d(t){console&&console.warn&&console.warn(t)}p(d,"ProcessEmitWarning");var y=Number.isNaN||p(function(t){return t!==t},"NumberIsNaN");function o(){o.init.call(this)}p(o,"EventEmitter"),e.exports=o,e.exports.once=W,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var h=10;function k(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}p(k,"checkListener"),Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if(typeof t!="number"||t<0||y(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=p(function(t){if(typeof t!="number"||t<0||y(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},"setMaxListeners");function m(t){return t._maxListeners===void 0?o.defaultMaxListeners:t._maxListeners}p(m,"_getMaxListeners"),o.prototype.getMaxListeners=p(function(){return m(this)},"getMaxListeners"),o.prototype.emit=p(function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var a=t==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var f;if(n.length>0&&(f=n[0]),f instanceof Error)throw f;var v=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw v.context=f,v}var b=u[t];if(b===void 0)return!1;if(typeof b=="function")s(b,this,n);else for(var K=b.length,Z=R(b,K),i=0;i<K;++i)s(Z[i],this,n);return!0},"emit");function g(t,n,i,a){var u,f,v;if(k(i),f=t._events,f===void 0?(f=t._events=Object.create(null),t._eventsCount=0):(f.newListener!==void 0&&(t.emit("newListener",n,i.listener?i.listener:i),f=t._events),v=f[n]),v===void 0)v=f[n]=i,++t._eventsCount;else if(typeof v=="function"?v=f[n]=a?[i,v]:[v,i]:a?v.unshift(i):v.push(i),u=m(t),u>0&&v.length>u&&!v.warned){v.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=t,b.type=n,b.count=v.length,d(b)}return t}p(g,"_addListener"),o.prototype.addListener=p(function(t,n){return g(this,t,n,!1)},"addListener"),o.prototype.on=o.prototype.addListener,o.prototype.prependListener=p(function(t,n){return g(this,t,n,!0)},"prependListener");function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}p(L,"onceWrapper");function A(t,n,i){var a={fired:!1,wrapFn:void 0,target:t,type:n,listener:i},u=L.bind(a);return u.listener=i,a.wrapFn=u,u}p(A,"_onceWrap"),o.prototype.once=p(function(t,n){return k(n),this.on(t,A(this,t,n)),this},"once"),o.prototype.prependOnceListener=p(function(t,n){return k(n),this.prependListener(t,A(this,t,n)),this},"prependOnceListener"),o.prototype.removeListener=p(function(t,n){var i,a,u,f,v;if(k(n),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(u=-1,f=i.length-1;f>=0;f--)if(i[f]===n||i[f].listener===n){v=i[f].listener,u=f;break}if(u<0)return this;u===0?i.shift():N(i,u),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,v||n)}return this},"removeListener"),o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=p(function(t){var n,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var u=Object.keys(i),f;for(a=0;a<u.length;++a)f=u[a],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this},"removeAllListeners");function H(t,n,i){var a=t._events;if(a===void 0)return[];var u=a[n];return u===void 0?[]:typeof u=="function"?i?[u.listener||u]:[u]:i?F(u):R(u,u.length)}p(H,"_listeners"),o.prototype.listeners=p(function(t){return H(this,t,!0)},"listeners"),o.prototype.rawListeners=p(function(t){return H(this,t,!1)},"rawListeners"),o.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):S.call(t,n)},o.prototype.listenerCount=S;function S(t){var n=this._events;if(n!==void 0){var i=n[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}p(S,"listenerCount"),o.prototype.eventNames=p(function(){return this._eventsCount>0?c(this._events):[]},"eventNames");function R(t,n){for(var i=new Array(n),a=0;a<n;++a)i[a]=t[a];return i}p(R,"arrayClone");function N(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}p(N,"spliceOne");function F(t){for(var n=new Array(t.length),i=0;i<n.length;++i)n[i]=t[i].listener||t[i];return n}p(F,"unwrapListeners");function W(t,n){return new Promise(function(i,a){function u(v){t.removeListener(n,f),a(v)}p(u,"errorListener");function f(){typeof t.removeListener=="function"&&t.removeListener("error",u),i([].slice.call(arguments))}p(f,"resolver"),D(t,n,f,{once:!0}),n!=="error"&&q(t,u,{once:!0})})}p(W,"once");function q(t,n,i){typeof t.on=="function"&&D(t,"error",n,i)}p(q,"addErrorHandlerIfEventEmitter");function D(t,n,i,a){if(typeof t.on=="function")a.once?t.once(n,i):t.on(n,i);else if(typeof t.addEventListener=="function")t.addEventListener(n,p(function u(f){a.once&&t.removeEventListener(n,u),i(f)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}p(D,"eventTargetAgnosticAddListener")}),ae=U(B()),z=U(B()),{EventEmitter:$,init:pe,listenerCount:fe,once:de}=z,{default:le,...ce}=z,ve=ae.default??le??ce;var w=new $;w.setMaxListeners(1<<10);var _=typeof Deno<"u",x={title:_?"deno":"browser",browser:!0,env:_?new Proxy({},{get(r,e){return Deno.env.get(String(e))},ownKeys:()=>Reflect.ownKeys(Deno.env.toObject()),getOwnPropertyDescriptor:(r,e)=>{let l=Deno.env.toObject();if(e in Deno.env.toObject()){let s={enumerable:!0,configurable:!0};return typeof e=="string"&&(s.value=l[e]),s}},set(r,e,l){return Deno.env.set(String(e),String(l)),l}}):{},argv:_?Deno.args??[]:[],pid:_?Deno.pid??0:0,version:"v16.18.0",versions:{node:"16.18.0",v8:"9.4.146.26-node.22",uv:"1.43.0",zlib:"1.2.11",brotli:"1.0.9",ares:"1.18.1",modules:"93",nghttp2:"1.47.0",napi:"8",llhttp:"6.0.10",openssl:"1.1.1q+quic",cldr:"41.0",icu:"71.1",tz:"2022b",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0",..._?Deno.version??{}:{}},on:(...r)=>w.on(...r),addListener:(...r)=>w.addListener(...r),once:(...r)=>w.once(...r),off:(...r)=>w.off(...r),removeListener:(...r)=>w.removeListener(...r),removeAllListeners:(...r)=>w.removeAllListeners(...r),emit:(...r)=>w.emit(...r),prependListener:(...r)=>w.prependListener(...r),prependOnceListener:(...r)=>w.prependOnceListener(...r),listeners:()=>[],emitWarning:()=>{throw new Error("process.emitWarning is not supported")},binding:()=>{throw new Error("process.binding is not supported")},cwd:()=>_?Deno.cwd?.()??"/":"/",chdir:r=>{if(_)Deno.chdir(r);else throw new Error("process.chdir is not supported")},umask:()=>_?Deno.umask??0:0,nextTick:(r,...e)=>queueMicrotask(()=>r(...e))};var G=!1,j={false:"push",true:"unshift",after:"push",before:"unshift"},P={isPermalinkSymbol:!0};function M(r,e,l,s){var c;if(!G){var d="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#permalinks";typeof x=="object"&&x&&x.emitWarning?x.emitWarning(d):console.warn(d),G=!0}var y=[Object.assign(new l.Token("link_open","a",1),{attrs:[].concat(e.permalinkClass?[["class",e.permalinkClass]]:[],[["href",e.permalinkHref(r,l)]],Object.entries(e.permalinkAttrs(r,l)))}),Object.assign(new l.Token("html_block","",0),{content:e.permalinkSymbol,meta:P}),new l.Token("link_close","a",-1)];e.permalinkSpace&&l.tokens[s+1].children[j[e.permalinkBefore]](Object.assign(new l.Token("text","",0),{content:" "})),(c=l.tokens[s+1].children)[j[e.permalinkBefore]].apply(c,y)}function V(r){return"#"+r}function X(r){return{}}var ue={class:"header-anchor",symbol:"#",renderHref:V,renderAttrs:X};function E(r){function e(l){return l=Object.assign({},e.defaults,l),function(s,c,d,y){return r(s,l,c,d,y)}}return e.defaults=Object.assign({},ue),e.renderPermalinkImpl=r,e}var C=E(function(r,e,l,s,c){var d,y=[Object.assign(new s.Token("link_open","a",1),{attrs:[].concat(e.class?[["class",e.class]]:[],[["href",e.renderHref(r,s)]],e.ariaHidden?[["aria-hidden","true"]]:[],Object.entries(e.renderAttrs(r,s)))}),Object.assign(new s.Token("html_inline","",0),{content:e.symbol,meta:P}),new s.Token("link_close","a",-1)];if(e.space){var o=typeof e.space=="string"?e.space:" ";s.tokens[c+1].children[j[e.placement]](Object.assign(new s.Token(typeof e.space=="string"?"html_inline":"text","",0),{content:o}))}(d=s.tokens[c+1].children)[j[e.placement]].apply(d,y)});Object.assign(C.defaults,{space:!0,placement:"after",ariaHidden:!1});var O=E(C.renderPermalinkImpl);O.defaults=Object.assign({},C.defaults,{ariaHidden:!0});var Y=E(function(r,e,l,s,c){var d=[Object.assign(new s.Token("link_open","a",1),{attrs:[].concat(e.class?[["class",e.class]]:[],[["href",e.renderHref(r,s)]],Object.entries(e.renderAttrs(r,s)))})].concat(e.safariReaderFix?[new s.Token("span_open","span",1)]:[],s.tokens[c+1].children,e.safariReaderFix?[new s.Token("span_close","span",-1)]:[],[new s.Token("link_close","a",-1)]);s.tokens[c+1]=Object.assign(new s.Token("inline","",0),{children:d})});Object.assign(Y.defaults,{safariReaderFix:!1});var J=E(function(r,e,l,s,c){var d;if(!["visually-hidden","aria-label","aria-describedby","aria-labelledby"].includes(e.style))throw new Error("`permalink.linkAfterHeader` called with unknown style option `"+e.style+"`");if(!["aria-describedby","aria-labelledby"].includes(e.style)&&!e.assistiveText)throw new Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+e.style+"` style");if(e.style==="visually-hidden"&&!e.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var y=s.tokens[c+1].children.filter(function(g){return g.type==="text"||g.type==="code_inline"}).reduce(function(g,L){return g+L.content},""),o=[],h=[];if(e.class&&h.push(["class",e.class]),h.push(["href",e.renderHref(r,s)]),h.push.apply(h,Object.entries(e.renderAttrs(r,s))),e.style==="visually-hidden"){if(o.push(Object.assign(new s.Token("span_open","span",1),{attrs:[["class",e.visuallyHiddenClass]]}),Object.assign(new s.Token("text","",0),{content:e.assistiveText(y)}),new s.Token("span_close","span",-1)),e.space){var k=typeof e.space=="string"?e.space:" ";o[j[e.placement]](Object.assign(new s.Token(typeof e.space=="string"?"html_inline":"text","",0),{content:k}))}o[j[e.placement]](Object.assign(new s.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new s.Token("html_inline","",0),{content:e.symbol,meta:P}),new s.Token("span_close","span",-1))}else o.push(Object.assign(new s.Token("html_inline","",0),{content:e.symbol,meta:P}));e.style==="aria-label"?h.push(["aria-label",e.assistiveText(y)]):["aria-describedby","aria-labelledby"].includes(e.style)&&h.push([e.style,r]);var m=[Object.assign(new s.Token("link_open","a",1),{attrs:h})].concat(o,[new s.Token("link_close","a",-1)]);(d=s.tokens).splice.apply(d,[c+3,0].concat(m)),e.wrapper&&(s.tokens.splice(c,0,Object.assign(new s.Token("html_block","",0),{content:e.wrapper[0]+`
`})),s.tokens.splice(c+3+m.length+1,0,Object.assign(new s.Token("html_block","",0),{content:e.wrapper[1]+`
`})))});function Q(r,e,l,s){var c=r,d=s;if(l&&Object.prototype.hasOwnProperty.call(e,c))throw new Error("User defined `id` attribute `"+r+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(e,c);)c=r+"-"+d,d+=1;return e[c]=!0,c}function T(r,e){e=Object.assign({},T.defaults,e),r.core.ruler.push("anchor",function(l){for(var s,c={},d=l.tokens,y=Array.isArray(e.level)?(s=e.level,function(g){return s.includes(g)}):function(g){return function(L){return L>=g}}(e.level),o=0;o<d.length;o++){var h=d[o];if(h.type==="heading_open"&&y(Number(h.tag.substr(1)))){var k=e.getTokensText(d[o+1].children),m=h.attrGet("id");m=m==null?Q(e.slugify(k),c,!1,e.uniqueSlugStartIndex):Q(m,c,!0,e.uniqueSlugStartIndex),h.attrSet("id",m),e.tabIndex!==!1&&h.attrSet("tabindex",""+e.tabIndex),typeof e.permalink=="function"?e.permalink(m,e,l,o):(e.permalink||e.renderPermalink&&e.renderPermalink!==M)&&e.renderPermalink(m,e,l,o),o=d.indexOf(h),e.callback&&e.callback(h,{slug:m,title:k})}}})}Object.assign(J.defaults,{style:"visually-hidden",space:!0,placement:"after",wrapper:null}),T.permalink={__proto__:null,legacy:M,renderHref:V,renderAttrs:X,makePermalink:E,linkInsideHeader:C,ariaHidden:O,headerLink:Y,linkAfterHeader:J},T.defaults={level:1,slugify:function(r){return encodeURIComponent(String(r).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,tabIndex:"-1",getTokensText:function(r){return r.filter(function(e){return["text","code_inline"].includes(e.type)}).map(function(e){return e.content}).join("")},permalink:!1,renderPermalink:M,permalinkClass:O.defaults.class,permalinkSpace:O.defaults.space,permalinkSymbol:"\xB6",permalinkBefore:O.defaults.placement==="before",permalinkHref:O.defaults.renderHref,permalinkAttrs:O.defaults.renderAttrs},T.default=T;export{T as default};
//# sourceMappingURL=markdown-it-anchor.bundle.js.map