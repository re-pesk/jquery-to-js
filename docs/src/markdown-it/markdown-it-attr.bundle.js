var W=Object.create,j=Object.defineProperty,T=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,N=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,A=(o,u)=>()=>(u||o((u={exports:{}}).exports,u),u.exports),$=(o,u)=>{for(var c in u)j(o,c,{get:u[c],enumerable:!0})},O=(o,u,c,b)=>{if(u&&typeof u=="object"||typeof u=="function")for(let d of D(u))!S.call(o,d)&&d!==c&&j(o,d,{get:()=>u[d],enumerable:!(b=T(u,d))||b.enumerable});return o},z=(o,u,c)=>(O(o,u,"default"),c&&O(c,u,"default")),q=(o,u,c)=>(c=o!=null?W(N(o)):{},O(u||!o||!o.__esModule?j(c,"default",{value:o,enumerable:!0}):c,o)),w=A((o,u)=>{function c(i,s,a=65536){let n=0,t=[],e=[],r;for(;(r=s.exec(i))&&n<a;){let l=r.groups;if(l.id)e.push(["id",l.id]);else if(l.class)t.push(l.class);else if(l.attr){let p=l.q&&l.q.length,f=p?l.val.slice(p,-p):l.val||"";e.push([l.attr,f])}else if(l.term)return t.length&&e.push(["class",t.join(" ")]),{attrs:e,index:r.index+r[0].length};n++}return null}function b(i,s){if(!i[s])return null;let a=0;for(s--;s>=0;s--){let n=i[s],{nesting:t}=n;if(t===1&&a===0)return n;a+=t}return null}function d(i,s,a,n=()=>!0){for(let t=s,e=i.length;t<e;t++){let r=i[t];if(!n(r))return;if(a(r))return r}}function x(i,s,a,n=()=>!0){for(let t=s;t>=0;t--){let e=i[t];if(!n(e))return;if(a(e))return e}}function g(i,s,a,n=()=>!0){for(let t=s;t>=0;t--){let e=i[t];if(!n(e))return-1;if(a(e))return t}return-1}function y(i,s){let{attrs:a}=s;a&&a.forEach(n=>i.attrPush(n))}u.exports={parseAttrs:c,findOpenToken:b,find:d,rfind:x,rfindIndex:g,attrConcat:y}}),B=A((o,u)=>{var{findOpenToken:c,find:b,rfind:d,rfindIndex:x,attrConcat:g}=w(),y=[{name:"first_child",handler(i,s,a,n,t){if(s!==0)return;let e=d(t,n-1,l=>!l.hidden,l=>l.nesting===1);if(!e)return;g(e,i);let r=a[1];return r&&r.type==="text"&&(r.content=r.content.replace(/^\s+/,"")),!0}},{name:"after_inline_block",handler(i,s,a){let n=x(a,s-1,e=>e.type!=="text"||!!e.content),t=n>=0&&a[n];if(t){if(t.nesting===-1){let e=c(a,n);if(!e)return!1;g(e,i)}else if(t.nesting===0&&t.type!=="text")g(t,i);else return!1;return!0}}},{name:"last_child",handler(i,s,a,n,t){if(s!==a.length-1)return;let e=b(t,n+1,f=>!f.hidden,f=>f.nesting===-1);if(!e)return;let{level:r}=e,l=d(t,n-1,f=>f.level===r,f=>f.nesting===1);if(!l)return;i.attrs.forEach(f=>l.attrPush(f));let p=a[s-1];return p&&p.type==="text"&&(p.content=p.content.replace(/\s+$/,"")),!0}}];u.exports={inlineAttrsApplyRules:y},y.unshift({name:"raw_table_tr",disabled:!0,handler(i,s,a,n,t){if(a.length!==1||t.length<=s+2||!(t[n+1].type==="td_close"&&t[n+2].type==="tr_close"))return;let e=c(t,n+2);if(e)return g(e,i),t.splice(n+1,1),t.splice(n-1,1),!0}})}),I=A((o,u)=>{var{parseAttrs:c,attrConcat:b}=w(),{inlineAttrsApplyRules:d}=B();function x(g,y={}){let i=y.deliminator||"{",s=i.length,a=/\#(?<id>[^\s#.="'}]+)|\.(?<class>[^\s#.="'}]+)|(?<attr>[^\s#.="'}]+)(?:\=(?<val>[^\s}"'][^\s}]*|(?<q>["']).*?\k<q>))?|(?<term>})/g,n=y.re,t=n?n.sticky||n.global?n:new RegExp(n,n.flags+"g"):a;g.block.ruler.before("table","block_attrs",(e,r,l,p)=>{let{src:f,bMarks:h,eMarks:v,tShift:_}=e;if(e.sCount[r]!==e.sCount[r+1]||l>r+2&&e.sCount[r+1]===e.sCount[r+2]&&f.startsWith(i,h[r+1]+_[r+1]))return!1;let k=h[r]+_[r],m=v[r];if(f.startsWith(i,k)){t.lastIndex=k+s;let{attrs:C,index:M}=c(f,t)||{};if(!(C&&M===m))return!1;if(p)return!0;e.line=r+1;let E=e.push("block_attr","",0);return E.attrs=C,E.hidden=!0,!0}return!1},{alt:["paragraph"]}),g.inline.ruler.push("inline_attrs",(e,r)=>{let{src:l,pos:p}=e;if(l.startsWith(i,p)){t.lastIndex=p+s;let{attrs:f,index:h}=c(l,t)||{};if(!f)return!1;if(!r){let v=e.push("inline_attr","",0);v.attrs=f,v.content=l.substring(p,h),v.hidden=!0}return e.pos=h,!0}return!1}),g.core.ruler.after("block","apply_block_attrs",e=>{e.tokens.forEach((r,l,p)=>{if(r.type==="block_attr"&&r.attrs){let f=p[l+1];f&&(b(f,r),p.splice(l,1))}})}),g.core.ruler.after("inline","apply_inline_attrs",e=>{e.tokens.forEach((r,l,p)=>{let{children:f}=r;f&&(f.forEach((h,v,_)=>{h.type==="inline_attr"&&(d.some(({handler:k,disabled:m})=>m?!1:k(h,v,_,l,p))||(h.type="text",h.hidden=!1))}),r.children=f.filter(h=>h.type!=="inline_attr"))})})}u.exports=Object.assign(x,{inlineAttrsApplyRules:d})}),R={};$(R,{default:()=>H});var F=q(I());z(R,q(I()));var{default:P,...G}=F,H=P!==void 0?P:G;export{H as default};
//# sourceMappingURL=markdown-it-attr.bundle.js.map