var G=Object.create,S=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyNames,K=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty,R=(c,f)=>()=>(f||c((f={exports:{}}).exports,f),f.exports),U=(c,f)=>{for(var h in f)S(c,h,{get:f[h],enumerable:!0})},x=(c,f,h,w)=>{if(f&&typeof f=="object"||typeof f=="function")for(let g of J(f))!Q.call(c,g)&&g!==h&&S(c,g,{get:()=>f[g],enumerable:!(w=H(f,g))||w.enumerable});return c},V=(c,f,h)=>(x(c,f,"default"),h&&x(h,f,"default")),P=(c,f,h)=>(h=c!=null?G(K(c)):{},x(f||!c||!c.__esModule?S(h,"default",{value:c,enumerable:!0}):h,c)),N=R((c,f)=>{"use strict";function h(o,a,p,k){var d=Number(o[a].meta.id+1).toString(),b="";return typeof k.docId=="string"&&(b="-"+k.docId+"-"),b+d}function w(o,a){var p=Number(o[a].meta.id+1).toString();return o[a].meta.subId>0&&(p+=":"+o[a].meta.subId),"["+p+"]"}function g(o,a,p,k,d){var b=d.rules.footnote_anchor_name(o,a,p,k,d),M=d.rules.footnote_caption(o,a,p,k,d),e=b;return o[a].meta.subId>0&&(e+=":"+o[a].meta.subId),'<sup class="footnote-ref"><a href="#fn'+b+'" id="fnref'+e+'">'+M+"</a></sup>"}function z(o,a,p){return(p.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`)+`<section class="footnotes">
<ol class="footnotes-list">
`}function D(){return`</ol>
</section>
`}function F(o,a,p,k,d){var b=d.rules.footnote_anchor_name(o,a,p,k,d);return o[a].meta.subId>0&&(b+=":"+o[a].meta.subId),'<li id="fn'+b+'" class="footnote-item">'}function L(){return`</li>
`}function q(o,a,p,k,d){var b=d.rules.footnote_anchor_name(o,a,p,k,d);return o[a].meta.subId>0&&(b+=":"+o[a].meta.subId),' <a href="#fnref'+b+'" class="footnote-backref">\u21A9\uFE0E</a>'}f.exports=function(o){var a=o.helpers.parseLinkLabel,p=o.utils.isSpace;o.renderer.rules.footnote_ref=g,o.renderer.rules.footnote_block_open=z,o.renderer.rules.footnote_block_close=D,o.renderer.rules.footnote_open=F,o.renderer.rules.footnote_close=L,o.renderer.rules.footnote_anchor=q,o.renderer.rules.footnote_caption=w,o.renderer.rules.footnote_anchor_name=h;function k(e,t,i,s){var u,v,l,r,n,y,_,I,m,C,O,A=e.bMarks[t]+e.tShift[t],T=e.eMarks[t];if(A+4>T||e.src.charCodeAt(A)!==91||e.src.charCodeAt(A+1)!==94)return!1;for(n=A+2;n<T;n++){if(e.src.charCodeAt(n)===32)return!1;if(e.src.charCodeAt(n)===93)break}if(n===A+2||n+1>=T||e.src.charCodeAt(++n)!==58)return!1;if(s)return!0;for(n++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),y=e.src.slice(A+2,n-2),e.env.footnotes.refs[":"+y]=-1,_=new e.Token("footnote_reference_open","",1),_.meta={label:y},_.level=e.level++,e.tokens.push(_),u=e.bMarks[t],v=e.tShift[t],l=e.sCount[t],r=e.parentType,O=n,I=m=e.sCount[t]+n-(e.bMarks[t]+e.tShift[t]);n<T&&(C=e.src.charCodeAt(n),p(C));)C===9?m+=4-m%4:m++,n++;return e.tShift[t]=n-O,e.sCount[t]=m-I,e.bMarks[t]=O,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,i,!0),e.parentType=r,e.blkIndent-=4,e.tShift[t]=v,e.sCount[t]=l,e.bMarks[t]=u,_=new e.Token("footnote_reference_close","",-1),_.level=--e.level,e.tokens.push(_),!0}function d(e,t){var i,s,u,v,l,r=e.posMax,n=e.pos;return n+2>=r||e.src.charCodeAt(n)!==94||e.src.charCodeAt(n+1)!==91||(i=n+2,s=a(e,n+1),s<0)?!1:(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),u=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(i,s),e.md,e.env,l=[]),v=e.push("footnote_ref","",0),v.meta={id:u},e.env.footnotes.list[u]={content:e.src.slice(i,s),tokens:l}),e.pos=s+1,e.posMax=r,!0)}function b(e,t){var i,s,u,v,l,r=e.posMax,n=e.pos;if(n+3>r||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(n)!==91||e.src.charCodeAt(n+1)!==94)return!1;for(s=n+2;s<r;s++){if(e.src.charCodeAt(s)===32||e.src.charCodeAt(s)===10)return!1;if(e.src.charCodeAt(s)===93)break}return s===n+2||s>=r||(s++,i=e.src.slice(n+2,s-1),typeof e.env.footnotes.refs[":"+i]>"u")?!1:(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+i]<0?(u=e.env.footnotes.list.length,e.env.footnotes.list[u]={label:i,count:0},e.env.footnotes.refs[":"+i]=u):u=e.env.footnotes.refs[":"+i],v=e.env.footnotes.list[u].count,e.env.footnotes.list[u].count++,l=e.push("footnote_ref","",0),l.meta={id:u,subId:v,label:i}),e.pos=s,e.posMax=r,!0)}function M(e){var t,i,s,u,v,l,r,n,y,_,I=!1,m={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(C){return C.type==="footnote_reference_open"?(I=!0,y=[],_=C.meta.label,!1):C.type==="footnote_reference_close"?(I=!1,m[":"+_]=y,!1):(I&&y.push(C),!I)}),!!e.env.footnotes.list)){for(l=e.env.footnotes.list,r=new e.Token("footnote_block_open","",1),e.tokens.push(r),t=0,i=l.length;t<i;t++){for(r=new e.Token("footnote_open","",1),r.meta={id:t,label:l[t].label},e.tokens.push(r),l[t].tokens?(n=[],r=new e.Token("paragraph_open","p",1),r.block=!0,n.push(r),r=new e.Token("inline","",0),r.children=l[t].tokens,r.content=l[t].content,n.push(r),r=new e.Token("paragraph_close","p",-1),r.block=!0,n.push(r)):l[t].label&&(n=m[":"+l[t].label]),n&&(e.tokens=e.tokens.concat(n)),e.tokens[e.tokens.length-1].type==="paragraph_close"?v=e.tokens.pop():v=null,u=l[t].count>0?l[t].count:1,s=0;s<u;s++)r=new e.Token("footnote_anchor","",0),r.meta={id:t,subId:s,label:l[t].label},e.tokens.push(r);v&&e.tokens.push(v),r=new e.Token("footnote_close","",-1),e.tokens.push(r)}r=new e.Token("footnote_block_close","",-1),e.tokens.push(r)}}o.block.ruler.before("reference","footnote_def",k,{alt:["paragraph","reference"]}),o.inline.ruler.after("image","footnote_inline",d),o.inline.ruler.after("footnote_inline","footnote_ref",b),o.core.ruler.after("inline","footnote_tail",M)}}),E={};U(E,{default:()=>Y});var W=P(N());V(E,P(N()));var{default:j,...X}=W,Y=j!==void 0?j:X;export{Y as default};
//# sourceMappingURL=markdown-it-footnote.bundle.js.map